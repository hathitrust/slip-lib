
Steps to begin a new run
------------------------

0. (1) Define the run (N) in Config/run-N.conf and rdist to the producer
       and Solr hosts
   (2) Edit the crontabs on (minimally) producer and (optionallY) on
       Solr hosts adding index-j, report-j lines on producer hosts, 
       sizer-j on Solr hosts.
   (3) Initialize run for all hosts/shards to time 0 or a particular time:
          zero:     ./control-j -kinit -r1 
          specific: ./control-j -kinit -r1 -t2008-09-12_00:00:00
  
1. Stop running producer and enqueuer processes:

   ./control-j -kstop -r1
   ./control-j -kstop -r1 -e

2. Stop Solr server:

   http://dev.solr-sdr.umdl.umich.edu:8080/manager/html/list

3. Delete Solr index dir: 

   pilsner:/l1/idx/m/mbooks-1/data % rm -rf index

4. Start Solr server:

   http://dev.solr-sdr.umdl.umich.edu:8080/manager/html/list

5. Initialize (if not already done) run for all hosts/shards 
   to time 0 or a particular time:

   zero:     ./control-j -kinit -r1 
   specific: ./control-j -kinit -r1 -t2008-09-12_00:00:00

6. Zero the log file for the run (1) on each host:

   rm -rf host1:/l1/bin/l/ls/index/logs/run-1
   rm -rf host2:/l1/bin/l/ls/index/logs/run-1

7. Configure the producer processes:

   ./control-j -kconf -r1 -R1 -hclamato -n1
   ./control-j -kconf -r1 -R1 -hassam -n2
   ./control-j -kconf -r1 -R1 -hbancha -n2

8. Check the crontab scheduling  on all producer/enqueuer/sizer hosts:

   crontab -e

9. Enable the enqueuer process:

   ./control-j -kstart -r1 -e

10. Enable the producer processes for all shards/hosts or singly:

    all:    ./control-j -kstart -r1
    single: ./control-j -kstart -r1 -hassam
    single: ./control-j -kstart -r1 -R1 -hassam
