# -------------------------------------------------------------------
# Run-70 config: alamo Page indexing test  
#
# DEVELOPMENT!!! 
#
# based on run 20 for ptsearch
# -------------------------------------------------------------------
use_test_tables = 0

#
# Document subclass
#
document_data_class = Document::Doc::Data::Ocr::Page
# XXX  Do we need any changes in the schema?
document_metadata_class  = Document::Doc::vSolrMetadataAPI::Schema_PTS_1

garbage_ocr_class  = Document::Algorithms::Garbage_1

#
# Delete by query
#
default_Solr_delete_field   = vol_id

#
# Search
#
default_Solr_search_fields   = hid,vol_id,pgnum,seq,record_no

# highlighting parameters
solr_hl_snippets = 200
solr_hl_fragsize = 300

#
# Sizes
#
num_shards_list    = 1|2|3
# does this work for pt search config?

queue_slice_size        = 20
#
# Server key to virtual server URI 
#
XXX fix this 


#mbooks_solr_engines     = http://solr-sdr-dev:8112/ptsearch

engine_for_shard_1  = http://solr-sdr-dev:8111/dev-1
engine_for_shard_2  = http://solr-sdr-dev:8111/dev-2
engine_for_shard_3  = http://solr-sdr-dev:8111/dev-3



# what is this?
#prod_engine_for_shard_1 = http://solr-sdr-ptsearch:8080/ptsearch

# shard to index directory map
#
dir_for_shard_1    = /l/solrs/dev/solrs/4.2/1/core/data/index
dir_for_shard_2    = /l/solrs/dev/solrs/4.2/2/core/data/index
dir_for_shard_3    = /l/solrs/dev/solrs/4.2/3/core/data/index

#
# host-to-shard(s) map
# XXX is this right?
shards_of_host_solr-sdr-dev  = 1|2|3


#
# shard(s)-to-host map
#
host_of_shard_1    = solr-sdr-dev
host_of_shard_2    = solr-sdr-dev
host_of_shard_3    = solr-sdr-dev
#
# producer hosts / shards
#
producers_per_shard = 1
# producers_per_host should be ceiling of (num_shards * producers_per_shard) / num_hosts
# producer hosts / shards
#
producers_per_shard = 10
# producers_per_host should be ceiling of:
# (num_shards * producers_per_shard) / num_hosts that are active
# So:
# (12 shards * 10 producers_per_shard) / 4 (earlgrey-*) = 120/4 = 30
producers_per_host = 30
producer_hosts     = earlgrey-1|earlgrey-2|earlgrey-3|earlgrey-4|koolaid-7|koolaid-9


solr_hosts         = alamo

hosting_site       = macc
#XXX fix this
tomcat_pattern     = /l/local/apache-tomcat-dev/\s+-D

#
# Error triage - large-scale
# 
# Solr could not parse doc
max_indx_errors = 1000;
# Could not create OCR for Solr doc
max_ocr__errors = 1000;
# Could not get metadata for Solr doc
max_meta_errors = 5000;
# Server unavailable
max_serv_errors = 100;
# N >= numhosts * numproducers/host * queue_slice_size
# Currently 5 * 5 * 5 = 125 
max_no_indexer_avail = 130;
# Serious stuff
max_crit_errors = 5;
